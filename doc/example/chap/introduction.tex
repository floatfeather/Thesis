\chapter{引言}

本章主要介绍了自动缺陷定位的研究背景及其重要意义，然后阐述了本文的研究内容、主要贡献和论文结构。

\section{研究背景}

随着软件的发展，生活中越来越多的方面都与软件有着紧密的关系。
小到人们的日常出行、购物、餐饮等，大到航空航天、医药等领域，软件在人们的生活中扮演着重要的角色。
随着软件的应用领域的扩大，软件的复杂性上升，提升了软件缺陷的可能性。
软件缺陷可能会导致巨大的损失。
一个著名的被广泛引用的例子是海湾战争时，一颗导弹由于导航软件的精度缺陷而偏离了目标，导致28人死亡和100人受伤\parencite{Zou2015A}。
2002年，美国国家标准与技术研究院(NIST)发表的一篇报告\parencite{NIST2002The}显示，软件缺陷每年会导致约595亿美元的经济损失。
发现并修复软件缺陷，保障软件的高质量成为一项重要的任务。

\section{研究意义}

在发现软件缺陷之后，开发人员为了解决这个缺陷往往需要三步\parencite{Parnin2011Are}。
第一步，缺陷定位，需要找到程序中和这个缺陷有关的语句。
第二步，理解缺陷，明白为什么会发生缺陷。
第三步，修复缺陷，修改代码以让缺陷消失。
这三个步骤合起来就是调试的过程。缺陷定位作为调试的第一步，其完成速度和准确性对后面的步骤有着很大的影响。
在传统的开发环境当中，人们可以手动调试来定位缺陷，比如插入断点、打印日志信息等等。
在1989年Collofello等人就指出尝试去减少软件中的错误会花费50\%到80\%的开发和维护的精力\parencite{Collofello1989Evaluating}。
随着软件的复杂性的上升，手动地定位软件缺陷将会耗费更多开发者的时间和精力。
为了提高定位缺陷的速度，研究人员对自动化的缺陷定位展开了研究，并取得了巨大的进展
\parencite{Weiser1981Program,Weiser1984Program,Reps1997The,Ball2003From,Groce2004Understanding,
Jones2002Visualization,Liblit2005Scalable,Liu2005SOBER,
Renieres2003Fault,Abreu2006An,Xie2013A,W2009BP,
Wong2012Effective,Le2016A,Papadakis2015Metallaxis,Moon2014Ask,Zhang2006Locating,
Chandra2011Angelic,Shapiro1982Algorithmic,Zeller2002Isolating,Zeller2002Simplifying}。
然而在2011年，Partin和Osro的一篇调查\parencite{Parnin2011Are}通过研究缺陷定位技术在实际应用场景下的效果，发现以往的评价指标并不能准确的反映缺陷定位技术在实际应用中的效果。
以往的缺陷定位技术是基于一系列关于开发人员会如何调试的假设，而这些假设在实际场景的某些情况下会失效。
自动化缺陷定位技术还有很大的发展空间。

\section{本文研究内容和主要贡献}

为了能提升调试的效率，本文对自动化缺陷定位技术进行了深入的研究。
通过在实际缺陷中分析传统的缺陷定位技术的效果，本文提出了一种结合基于频谱的缺陷定位和基于状态覆盖的缺陷定位的方式。
本文探索了各种不同的结合方式的效果，分析了基于状态覆盖的缺陷定位公式的不足，并使用基于频谱的缺陷定位公式与其互补。
同时，由于基于状态覆盖的缺陷定位使用的预定义谓词的不灵活性，
本文提出了一种基于机器学习的谓词预测模型，而传统的基于状态覆盖的缺陷定位使用的是预定义谓词。
预测出的谓词与预定义谓词互补，能进一步提升定位效果。

本文的贡献如下：
\begin{itemize}
\item 在实际缺陷中深入分析了基于频谱的缺陷定位的效果，发现了基于频谱的缺陷定位利用的频谱信息粒度不够细，导致缺陷和非缺陷无法区别。
\item 在实际缺陷中深入分析了基于状态覆盖的缺陷定位的效果，发现了其怀疑度公式在实际缺陷中并不适用。
\item 提出了结合基于频谱的缺陷定位和基于状态覆盖的缺陷定位的方式。基于状态覆盖的缺陷定位的信息粒度比基于频谱的缺陷定位的信息粒度细，
而基于频谱的缺陷定位公式在实际缺陷中仍然表现良好，两者结合之后获得了更好的效果。
\item 利用结合后的模型，在实际缺陷中分析了基于状态覆盖的缺陷定位的谓词起作用的原因，发现分支是起最大作用的谓词。
\item 提出了一种基于机器学习的预测谓词的模型，能够根据语句上下文预测谓词，从而更好地定位缺陷。
\end{itemize}

\section{论文结构}

本文共七章，结构如下：

第一章为引言，介绍了本文的研究背景、研究意义、研究内容和主要贡献。

第二章为相关工作，介绍了国内外相关领域的研究现状，包括自动缺陷定位技术、机器学习技术和实验数据集三部分。

第三章为问题分析，在实际缺陷中分析了现有自动缺陷定位技术的优势和不足。

第四章介绍了基于谓词预测的结合现有技术的缺陷定位工具的设计，包括结合现有技术的方法、基于机器学习的谓词预测模型等等。

第五章介绍了基于谓词预测的结合现有技术的缺陷定位工具的实现，包括整个代码流程和各个模块的实现方式。

第六章是本文提出的缺陷定位工具的实验与验证。

第七章是对全文的总结和对未来工作的展望。

